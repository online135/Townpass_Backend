<!--新增模式-->
<!DOCTYPE html>
<html lang="zh-Hant"> <!--中文-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 引用外部 CSS 檔案 -->
    <link rel="stylesheet" href="style.css">

    <title>設定提醒</title>

    <style>
        /* 容器樣式 */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* RWD 設計 */
        @media (max-width: 600px) {
            .form-group {
                margin-bottom: 10px;
            }
        }

        /* 樣式調整確保所有項目對齊 */
        label {
            font-size: 16px; /* 根據需求調整字體大小 */
            color: #333;
        }

        .switch {
            display: inline-block;
            width: 40px;
            height: 20px;
            position: relative;
            top: 10px;
            right: 500px;
        }

        del {
        text-decoration: line-through;
        color:#333;
        }
    </style>
</head>


<body>

    <div class="container">

        <h1>設定提醒</h1>

        <!-- 標題輸入框 -->
        <div class="form-group">
            <label for="title">標題</label>
            <input type="text" id="title" placeholder="輸入提醒標題">
        </div>

        <!-- 時間選擇 -->
        <div class="form-group">
            <label for="time">時間</label>
            <input type="time" id="time" value="${new Date().toTimeString().substr(0, 5)}">
        </div>

        <!-- 重複選單 -->
         <div class="form-group flex-row">
            <label for="repeatSwitch">重複</label>
            <label class="switch">
                <input type="checkbox" id="repeatSwitch">
                <span class="slider round"></span>
            </label>
        </div>

        <!-- 複選下拉選單（預設隱藏） -->
        <div id="repeatContainer" style="display: none;">
            <select id="repeat" multiple>
                <option value="每天">每天</option>
                <option value="週一">週一</option>
                <option value="週二">週二</option>
                <option value="週三">週三</option>
                <option value="週四">週四</option>
                <option value="週五">週五</option>
                <option value="週六">週六</option>                    
                <option value="週日">週日</option>
            </select>
        </div>


        <!-- 主類別選單 -->
        <div class="form-group">
            <label for="mainCategory">主類別</label>
            <select id="mainCategory">
                <option></option>
                <option value="工作">工作</option>
                <option value="個人">個人</option>
                <option value="其他">其他</option>
            </select>
        </div>

        <!-- 子類別選單 -->
        <div class="form-group">
            <label for="subCategory">子類別</label>
            <select id="subCategory">
                <option></option>
                <option value="會議">會議</option>
                <option value="截止日期">截止日期</option>
                <option value="約會">約會</option>
                <option value="其他">其他</option>
            </select>
        </div>

        <!-- 通知方式選單 -->
        <div class="form-group">
            <label for="notificationMethod">通知方式</label>
            <select id="notificationMethod">
                <option></option>
                <option value="Line">Line</option>
                <option value="Email">Email</option>
                <option value="WhatsApp">WhatsApp</option>
                <option value="簡訊" disabled>簡訊(已停用)</option>
            </select>
            <button class="test-button" id="testNotification">測試</button>
        </div>

        <!-- 保存按鈕 -->
        <button class="save-button" id="saveReminder">保存</button>
    </div>

    <script>
        
        document.getElementById('repeatSwitch').addEventListener('change', function() {
    const repeatContainer = document.getElementById('repeatContainer');
    
    // 顯示或隱藏複選下拉選單
    repeatContainer.style.display = this.checked ? 'block' : 'none';
});

document.getElementById('repeat').addEventListener('change', function() {
    const selectedOptions = Array.from(this.selectedOptions).map(option => option.value);
    
    // 當選取 "每天" 時，自動選取所有選項
    if (selectedOptions.includes('每天')) {
        Array.from(this.options).forEach(option => option.selected = true);
    }
});

        // 測試通知功能
        document.getElementById('testNotification').addEventListener('click', function() {
            const method = document.getElementById('notificationMethod').value;
            if (method === '') {
                alert('請選擇通知方式後再進行測試。');
            } else {
                alert('測試通知已發送到 ' + method);
            }
        });

        // 儲存提醒
        document.getElementById('saveReminder').addEventListener('click', function() {
            const title = document.getElementById('title').value.trim();
            const time = document.getElementById('time').value;
            const repeat = Array.from(document.getElementById('repeat').selectedOptions).map(opt => opt.value).join(', ');
            const mainCategory = document.getElementById('mainCategory').value;
            const subCategory = document.getElementById('subCategory').value;
            const notificationMethod = document.getElementById('notificationMethod').value;

            if (!title || !time || !mainCategory || !subCategory || !notificationMethod ) {
                alert('請填寫完整。');
                return;
            }

            const reminder = { title, time, repeat, mainCategory, subCategory, notificationMethod };
            let reminders = JSON.parse(localStorage.getItem('reminders')) || [];
            reminders.push(reminder);
            localStorage.setItem('reminders', JSON.stringify(reminders));

            alert('提醒已保存！');
            window.location.href = 'index.html';
        });
        var select = document.getElementById("簡訊");
        var optionToDisable = select.option[4];
        optionToDisable.disabled=true;

    </script>
</body>
</html>
